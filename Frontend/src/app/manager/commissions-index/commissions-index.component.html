<h1 class="display-5">Solicitudes de comisiones</h1>
<div class="mt-4">
  <div class="card mt-4 mb-4">
    <div class="card-header card-header-main">
      <h2 class="h5">Solicitudes del Área de {{manager?.department}}</h2>
    </div>
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th scope="col">Tipo de comisión</th>
              <th scope="col">Empleado</th>
              <th scope="col">Fecha de inicio de la comisión</th>
              <th scope="col">Fecha de termino de la comisión</th>
              <th scope="col">Estado de la comisión</th>
              <th scope="col">Monto depositado</th>
              <th scope="col">Opciones</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let commission of commissions">
              <td>{{ commission.typeCommission }}</td>
              <td *ngFor="let emp of commission.employee">
                {{ emp.name + " " + emp.lastName }}
              </td>
              <td>{{ commission.beginDate | date: "dd-MMM-yyyy":"es" }}</td>
              <td>{{ commission.endDate | date: "dd-MMM-yyyy" }}</td>
              <td>
                <span
                  [ngClass]="
                    commission.isApprovedByFinances &&
                    commission.isApprovedByManager
                      ? 'bg-primary'
                      : commission.isApprovedByFinances === false ||
                        commission.isApprovedByManager === false
                      ? 'bg-danger'
                      : 'bg-secondary'
                  "
                  class="badge rounded-pill"
                  >{{
                    commission.isApprovedByFinances &&
                    commission.isApprovedByManager
                      ? "Aprobada"
                      : commission.isApprovedByFinances === false ||
                        commission.isApprovedByManager === false
                      ? "No aprobada"
                      : "Por aprobar"
                  }}</span
                >
              </td>

              <td>
                {{
                  commission.amountAssigned
                    ? "$" + (commission.amountAssigned | number: "1.2") + " MXN"
                    : "Sin depósitos"
                }}
              </td>
              <td class="text-center">
                <button
                  [ngClass]="
                    commission.isApprovedByFinances &&
                    commission.isApprovedByManager
                      ? 'btn-outline-primary'
                      : 'disabled btn-outline-secondary'
                  "
                  class="btn btn-sm"
                >
                  <i class="fa fa-file-code"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
